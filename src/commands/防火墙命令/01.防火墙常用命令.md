---
order: 1
title: 防火墙常用命令

---
### 1、查看firewall服务状态

```shell
systemctl status firewalld

出现Active: 
active (running)切高亮显示则表示是启动状态。

出现 Active: 
inactive (dead)灰色表示停止，看单词也行。
```

### 2、查看firewall的状态

```shell
firewall-cmd --state
```

### 3、开启、重启、关闭防火墙服务

centos7前后对比：**service｜systemctl**

```shell
开启：service firewalld start

重启：service firewalld restart

关闭：service firewalld stop
```

### 4、查看防火墙规则

```shell
firewall-cmd --list-all
```

### 5、查询、开放、关闭端口

```shell
查询端口是否开放
firewall-cmd --query-port=8080/tcp

开放80端口
firewall-cmd --permanent --add-port=80/tcp

移除端口
firewall-cmd --permanent --remove-port=8080/tcp

#重启防火墙(修改配置后要重启防火墙)
firewall-cmd --reload
```

### 6.添加新的规则

(此处需注意添加常用的端口及IP访问规则)

```shell
常用端口允许所有IP访问本端口
firewall-cmd --zone=public --add-port=22/tcp --permanent # 远程登录

允许特定IP访问某个端口
firewall-cmd --permanent --add-rich-rule="rule family="ipv4" source address="集群ip" port protocol="tcp" port="3306" accept"

允许某个IP访问所有端口
firewall-cmd --permanent --add-rich-rule="rule family="ipv4" source address="集群ip" accept"

6.查看设置的防火墙规则
firewall-cmd --list-all

7.加载规则生效（生效前，注意检查配置的规则有没有错误）
firewall-cmd --reload

8、删除规则
firewall-cmd --permanent --remove-rich-rule="rule family="ipv4" source address="
192.168.142.166" port protocol="tcp" port="11300" accept"


```
